<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Portfolio — Front-end / UI·UX</title>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;600;700&family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

  <!-- Tailwind config MUST come before CDN script -->
  <script>
    tailwind = {
      config: {
        theme: {
          extend: {
            fontFamily: {
              display: ['Space Grotesk', 'system-ui', 'sans-serif'],
              sans: ['Inter', 'system-ui', 'sans-serif'],
            },
            colors: {
              brand: {
                50:'#F4F7FF',100:'#E6EEFF',200:'#C7D6FF',300:'#9FB6FF',
                400:'#6F8DFF',500:'#4B6DFF',600:'#314FFF',700:'#243BE0',
                800:'#1D2FB3',900:'#172685'
              },
              neon: { pink:'#ff2bd1', cyan:'#0ff7ff', lime:'#c8ff00', amber:'#ffcc00' }
            },
            boxShadow: {
              glow: '0 0 40px rgba(111,141,255,.35), 0 0 80px rgba(0,255,255,.15)',
              glass: 'inset 0 1px 0 rgba(255,255,255,.15), 0 10px 30px rgba(0,0,0,.35)'
            },
            backdropBlur: { xxl: '20px' },
            rotate: { 2.5: '2.5deg', 1.5: '1.5deg' }
          }
        }
      }
    }
  </script>
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- GSAP + ScrollTrigger + Split + Lenis + Three + VanillaTilt -->
  <script src="https://unpkg.com/gsap@3/dist/gsap.min.js"></script>
  <script src="https://unpkg.com/gsap@3/dist/ScrollTrigger.min.js"></script>
  <script src="https://unpkg.com/split-type"></script>
  <script src="https://unpkg.com/@studio-freight/lenis@1.0.35/bundled/lenis.min.js"></script>
  <script src="https://unpkg.com/three@0.160.0/build/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/vanilla-tilt@1.8.0/dist/vanilla-tilt.min.js"></script>

  <style>
    :root {
      --bg: #0a0b10;
      --ink: #e7ebff;
    }
    html,body { height:100%; background:var(--bg); color:var(--ink); }
    /* custom cursor */
    .cursor {
      position: fixed; left:0; top:0; width:16px; height:16px; border-radius:50%;
      pointer-events:none; z-index: 10000; mix-blend-mode: difference;
      background: #fff; transform: translate(-50%, -50%) scale(1);
      transition: transform .15s ease;
    }
    .cursor.-xl { transform: translate(-50%, -50%) scale(4); }
    /* noise overlay */
    .grain {
      pointer-events:none; position: fixed; inset:0; z-index: 5;
      background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" opacity="0.07" width="160" height="160" viewBox="0 0 160 160"><filter id="n"><feTurbulence type="fractalNoise" baseFrequency="0.7" numOctaves="2" stitchTiles="stitch"/></filter><rect width="100%" height="100%" filter="url(%23n)"/></svg>');
      background-size: 200px 200px;
      mix-blend-mode: soft-light;
    }
    /* section skew wrapper for “phá cách” */
    .skew-wrap { transform: skewY(-1.5deg); }
    .skew-content { transform: skewY(1.5deg); }
    /* marquee */
    .marquee {
      white-space: nowrap; overflow: hidden; mask-image: linear-gradient(90deg, transparent, #000 10%, #000 90%, transparent);
    }
    .marquee span {
      display: inline-block; padding-right: 3rem; animation: scroll 18s linear infinite;
    }
    @keyframes scroll { to { transform: translateX(-50%); } }
    /* hero 3D canvas behind everything */
    #stage3d { position: fixed; inset:0; z-index: 0; }
    /* glass card */
    .glass {
      background: rgba(255,255,255,.06);
      border: 1px solid rgba(255,255,255,.12);
      box-shadow: var(--shadow, 0 10px 30px rgba(0,0,0,.35));
      backdrop-filter: blur(18px);
    }
    /* project image cover */
    .proj-img { transition: transform .6s cubic-bezier(.2,.7,.2,1); transform-origin: center; }
    .proj:hover .proj-img { transform: scale(1.08) rotate(-.5deg); }
    .tag { border:1px solid rgba(255,255,255,.18); background: rgba(255,255,255,.06); }
    /* selection */
    ::selection { background: rgba(111,141,255,.6); color: #0a0b10; }
  </style>
</head>
<body class="font-sans antialiased selection:bg-brand-500/70">
  <!-- 3D Stage -->
  <canvas id="stage3d"></canvas>

  <!-- Cursor -->
  <div id="cursor" class="cursor"></div>
  <div class="grain"></div>

  <!-- NAV -->
  <header class="pointer-events-auto fixed top-0 left-0 right-0 z-50">
    <nav class="mx-auto mt-4 w-[min(1200px,92%)] glass rounded-2xl px-5 py-3 flex items-center justify-between shadow-glow">
      <a href="#home" class="font-display text-lg tracking-wide">
        <span class="font-bold text-brand-300">weird</span><span class="opacity-80">/uiux</span>
      </a>
      <ul class="hidden md:flex items-center gap-6 text-sm">
        <li><a href="#skills" class="opacity-80 hover:opacity-100 transition">Kĩ năng</a></li>
        <li><a href="#projects" class="opacity-80 hover:opacity-100 transition">Dự án</a></li>
        <li><a href="#about" class="opacity-80 hover:opacity-100 transition">Về tôi</a></li>
        <li><a href="#contact" class="opacity-80 hover:opacity-100 transition">Liên hệ</a></li>
      </ul>
      <a href="#contact" class="hidden sm:inline-block rounded-full bg-brand-600 hover:bg-brand-500 transition px-4 py-2 text-sm font-semibold shadow-glow">Hire me</a>
    </nav>
  </header>

  <!-- HERO -->
  <section id="home" class="relative z-10 pt-36 md:pt-44 pb-24 md:pb-32">
    <div class="w-[min(1200px,92%)] mx-auto">
      <div class="inline-block rounded-full tag px-3 py-1 text-[12px] uppercase tracking-[0.2em] mb-6">Front-end Dev • UI/UX Designer</div>
      <h1 id="heroTitle" class="font-display leading-[0.95] text-[12vw] md:text-[8vw] font-bold">
        Làm web <span class="text-transparent bg-clip-text bg-gradient-to-r from-neon-pink via-neon-cyan to-neon-lime">phá cách</span>, chuyển động <span class="text-brand-400">cực căng</span>.
      </h1>
      <p class="max-w-2xl mt-6 opacity-90">
        Mình biến thiết kế thành trải nghiệm tương tác siêu mượt: micro-interaction, 3D realtime, motion narrative. Không bó buộc grid, miễn <em>đã mắt</em> và <em>đã tay</em>.
      </p>
      <div class="flex flex-wrap gap-3 mt-8">
        <a href="#projects" class="rounded-full bg-white text-black px-5 py-3 font-semibold hover:scale-[1.02] transition">Xem công trình</a>
        <a href="#contact" class="rounded-full px-5 py-3 font-semibold border border-white/20 hover:bg-white/10 transition">Book lịch trao đổi</a>
      </div>
      <!-- marquee skills -->
      <div class="marquee mt-12 text-sm opacity-80">
        <span>
          Tailwind • React • Vue • Three.js • GSAP • ScrollTrigger • WebGL • Figma • Prototyping • Accessibility • Design System • Motion • Micro-interaction • Tailwind • React • Vue • Three.js • GSAP • ScrollTrigger • WebGL • Figma • Prototyping • Accessibility • Design System • Motion • Micro-interaction
        </span>
      </div>
    </div>
  </section>

  <!-- STATS / BADGES -->
  <section class="relative z-10 skew-wrap">
    <div class="skew-content w-[min(1200px,92%)] mx-auto grid sm:grid-cols-3 gap-4 md:gap-6">
      <div class="glass rounded-2xl p-6">
        <div class="text-4xl font-bold font-display">+6<span class="text-brand-400">y</span></div>
        <div class="opacity-80 mt-2">Kinh nghiệm làm web, product & visual systems</div>
      </div>
      <div class="glass rounded-2xl p-6">
        <div class="text-4xl font-bold font-display">40+</div>
        <div class="opacity-80 mt-2">Dự án đủ thể loại: landing, web app, 3D showcase…</div>
      </div>
      <div class="glass rounded-2xl p-6">
        <div class="text-4xl font-bold font-display">A11y</div>
        <div class="opacity-80 mt-2">Tối ưu hiệu năng & khả năng tiếp cận (WCAG)</div>
      </div>
    </div>
  </section>

  <!-- SKILLS -->
  <section id="skills" class="relative z-10 py-24 md:py-32">
    <div class="w-[min(1200px,92%)] mx-auto">
      <h2 class="font-display text-4xl md:text-6xl font-bold mb-10">Kĩ năng / Stack</h2>
      <div class="grid md:grid-cols-2 gap-6 md:gap-8">
        <div class="glass rounded-2xl p-6 md:p-8">
          <h3 class="font-display text-xl md:text-2xl font-semibold mb-4">Front-end Hardcore</h3>
          <ul class="grid grid-cols-2 gap-3 text-sm">
            <li class="tag rounded-xl px-3 py-2">React / Next</li>
            <li class="tag rounded-xl px-3 py-2">Vue / Nuxt</li>
            <li class="tag rounded-xl px-3 py-2">TypeScript</li>
            <li class="tag rounded-xl px-3 py-2">TailwindCSS</li>
            <li class="tag rounded-xl px-3 py-2">GSAP / Framer</li>
            <li class="tag rounded-xl px-3 py-2">WebGL / Three.js</li>
            <li class="tag rounded-xl px-3 py-2">Vite / Performance</li>
            <li class="tag rounded-xl px-3 py-2">Testing / CI</li>
          </ul>
          <div class="mt-4 text-sm opacity-80">
            Thiết kế chuyển động, narrative scroll, shader đơn giản, parallax, split-text… tối ưu Lighthouse 90+.
          </div>
        </div>
        <div class="glass rounded-2xl p-6 md:p-8">
          <h3 class="font-display text-xl md:text-2xl font-semibold mb-4">UI/UX Design</h3>
          <ul class="grid grid-cols-2 gap-3 text-sm">
            <li class="tag rounded-xl px-3 py-2">Wireframe → Hi-fi</li>
            <li class="tag rounded-xl px-3 py-2">Design System</li>
            <li class="tag rounded-xl px-3 py-2">Prototyping</li>
            <li class="tag rounded-xl px-3 py-2">User Research</li>
            <li class="tag rounded-xl px-3 py-2">A/B Testing</li>
            <li class="tag rounded-xl px-3 py-2">Figma / FigJam</li>
            <li class="tag rounded-xl px-3 py-2">Accessibility</li>
            <li class="tag rounded-xl px-3 py-2">Motion Spec</li>
          </ul>
          <div class="mt-4 text-sm opacity-80">
            Triết lí: Less guesswork, more user-driven. Hài hoà giữa thẩm mĩ và mục tiêu kinh doanh.
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- PROJECTS -->
  <section id="projects" class="relative z-10 py-24 md:py-32">
    <div class="w-[min(1200px,92%)] mx-auto">
      <div class="flex items-end justify-between mb-8">
        <h2 class="font-display text-4xl md:text-6xl font-bold">Dự án nổi bật</h2>
        <a href="#" class="opacity-80 hover:opacity-100 text-sm">Xem tất cả →</a>
      </div>
      <div class="grid md:grid-cols-12 gap-6 md:gap-8">
        <!-- Card 1 -->
        <article class="proj md:col-span-7 glass rounded-2xl overflow-hidden tilt" data-tilt data-tilt-glare data-tilt-max="10" data-tilt-speed="800">
          <a href="#" class="block relative">
            <img class="proj-img w-full h-[320px] md:h-[420px] object-cover" src="https://images.unsplash.com/photo-1526498460520-4c246339dccb?q=80&w=1600&auto=format&fit=crop" alt="Project 1">
            <div class="absolute inset-0 bg-gradient-to-t from-black/70 via-black/0 to-black/0"></div>
            <div class="absolute bottom-0 p-6 md:p-8">
              <h3 class="font-display text-2xl md:text-3xl font-semibold">MetaFlow — 3D Landing + Scroll Narrative</h3>
              <p class="opacity-80 mt-1 text-sm max-w-xl">WebGL particle scene + GSAP story-driven scroll, KPI tăng 34% CTR.</p>
              <div class="flex gap-2 mt-3">
                <span class="tag rounded-xl px-2 py-1 text-xs">Three.js</span>
                <span class="tag rounded-xl px-2 py-1 text-xs">GSAP</span>
                <span class="tag rounded-xl px-2 py-1 text-xs">Tailwind</span>
              </div>
            </div>
          </a>
        </article>

        <!-- Card 2 -->
        <article class="proj md:col-span-5 glass rounded-2xl overflow-hidden tilt" data-tilt data-tilt-max="12" data-tilt-speed="700">
          <a href="#" class="block relative">
            <img class="proj-img w-full h-[320px] object-cover" src="https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?q=80&w=1600&auto=format&fit=crop" alt="Project 2">
            <div class="absolute inset-0 bg-gradient-to-t from-black/70 via-black/0 to-black/0"></div>
            <div class="absolute bottom-0 p-6 md:p-8">
              <h3 class="font-display text-2xl font-semibold">Nebra — SaaS Dashboard</h3>
              <p class="opacity-80 mt-1 text-sm">Design system + motion micro-interaction, nps +26.</p>
              <div class="flex gap-2 mt-3">
                <span class="tag rounded-xl px-2 py-1 text-xs">React</span>
                <span class="tag rounded-xl px-2 py-1 text-xs">Framer-Motion</span>
              </div>
            </div>
          </a>
        </article>

        <!-- Card 3 -->
        <article class="proj md:col-span-5 glass rounded-2xl overflow-hidden tilt" data-tilt data-tilt-max="12" data-tilt-speed="700">
          <a href="#" class="block relative">
            <img class="proj-img w-full h-[300px] object-cover" src="https://images.unsplash.com/photo-1517694712202-14dd9538aa97?q=80&w=1600&auto=format&fit=crop" alt="Project 3">
            <div class="absolute inset-0 bg-gradient-to-t from-black/70 via-black/0 to-black/0"></div>
            <div class="absolute bottom-0 p-6 md:p-8">
              <h3 class="font-display text-2xl font-semibold">Argon — Brand Site</h3>
              <p class="opacity-80 mt-1 text-sm">Typography phá cách, hiệu ứng blend-mode, tốc độ tải ~1s.</p>
              <div class="flex gap-2 mt-3">
                <span class="tag rounded-xl px-2 py-1 text-xs">Vite</span>
                <span class="tag rounded-xl px-2 py-1 text-xs">Tailwind</span>
              </div>
            </div>
          </a>
        </article>

        <!-- Card 4 -->
        <article class="proj md:col-span-7 glass rounded-2xl overflow-hidden tilt" data-tilt data-tilt-max="10" data-tilt-speed="800">
          <a href="#" class="block relative">
            <img class="proj-img w-full h-[300px] md:h-[360px] object-cover" src="https://images.unsplash.com/photo-1558655146-d09347e92766?q=80&w=1600&auto=format&fit=crop" alt="Project 4">
            <div class="absolute inset-0 bg-gradient-to-t from-black/70 via-black/0 to-black/0"></div>
            <div class="absolute bottom-0 p-6 md:p-8">
              <h3 class="font-display text-2xl md:text-3xl font-semibold">Kite — Creative Lab Microsite</h3>
              <p class="opacity-80 mt-1 text-sm">WebGL shader đơn giản, scroll morphing sections.</p>
              <div class="flex gap-2 mt-3">
                <span class="tag rounded-xl px-2 py-1 text-xs">GLSL</span>
                <span class="tag rounded-xl px-2 py-1 text-xs">ScrollTrigger</span>
              </div>
            </div>
          </a>
        </article>
      </div>
    </div>
  </section>

  <!-- ABOUT -->
  <section id="about" class="relative z-10 py-24 md:py-32">
    <div class="w-[min(1200px,92%)] mx-auto">
      <h2 class="font-display text-4xl md:text-6xl font-bold mb-10">Về mình</h2>
      <div class="grid md:grid-cols-12 gap-6 md:gap-8">
        <div class="md:col-span-7 glass rounded-2xl p-6 md:p-8">
          <p class="opacity-90 leading-relaxed">
            Mình là <span class="font-semibold">Nguyễn An</span> — Front-end Dev / UI·UX Designer. Đam mê motion, 3D và những layout "khó chịu". 
            Tin rằng sự phá cách nếu có cơ sở sẽ tạo ra trải nghiệm <em>đáng nhớ</em>.
          </p>
          <ul class="mt-6 space-y-3 text-sm opacity-80">
            <li>• Ưu tiên hiệu năng: code-split, lazy-load, prefetch.</li>
            <li>• A11y từ đầu: semantic, focus ring, contrast.</li>
            <li>• Design system: token-first, scalable components.</li>
          </ul>
        </div>
        <div class="md:col-span-5 glass rounded-2xl p-6 md:p-8">
          <h3 class="font-display text-xl font-semibold mb-3">Giải thưởng / Nổi bật</h3>
          <ul class="space-y-3 text-sm">
            <li class="flex items-center gap-3"><span class="w-2 h-2 rounded-full bg-brand-500"></span> Awwwards SOTD (concept)</li>
            <li class="flex items-center gap-3"><span class="w-2 h-2 rounded-full bg-brand-500"></span> Behance Feature (UI/UX)</li>
            <li class="flex items-center gap-3"><span class="w-2 h-2 rounded-full bg-brand-500"></span> Clients: Fintech, Edtech, Agency</li>
          </ul>
          <div class="mt-6 flex gap-3">
            <a href="#" class="tag rounded-xl px-3 py-2 text-sm">CV / Resume</a>
            <a href="#" class="tag rounded-xl px-3 py-2 text-sm">Case studies</a>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- CONTACT -->
  <section id="contact" class="relative z-10 py-24 md:py-32">
    <div class="w-[min(1200px,92%)] mx-auto grid md:grid-cols-2 gap-6 md:gap-8">
      <div>
        <h2 class="font-display text-4xl md:text-6xl font-bold mb-4">Cùng làm thứ khác biệt.</h2>
        <p class="opacity-80 max-w-xl">Kể mình nghe về dự án của bạn. Mình thường phản hồi trong 24h.</p>
        <div class="flex gap-3 mt-6">
          <a href="mailto:hi@yourmail.com" class="tag rounded-xl px-3 py-2">hi@yourmail.com</a>
          <a href="#" class="tag rounded-xl px-3 py-2">LinkedIn</a>
          <a href="#" class="tag rounded-xl px-3 py-2">Behance</a>
          <a href="#" class="tag rounded-xl px-3 py-2">GitHub</a>
        </div>
      </div>
      <form action="https://formspree.io/f/YOUR_FORMSPREE_ID" method="POST" class="glass rounded-2xl p-6 md:p-8 shadow-glass">
        <div class="grid grid-cols-1 gap-4">
          <input class="bg-white/5 border border-white/15 rounded-xl px-4 py-3 outline-none focus:ring-2 focus:ring-brand-500/60" name="name" placeholder="Tên của bạn *" required>
          <input class="bg-white/5 border border-white/15 rounded-xl px-4 py-3 outline-none focus:ring-2 focus:ring-brand-500/60" type="email" name="email" placeholder="Email *" required>
          <input class="bg-white/5 border border-white/15 rounded-xl px-4 py-3 outline-none focus:ring-2 focus:ring-brand-500/60" name="subject" placeholder="Chủ đề">
          <textarea class="bg-white/5 border border-white/15 rounded-xl px-4 py-3 outline-none focus:ring-2 focus:ring-brand-500/60 min-h-[140px]" name="message" placeholder="Mô tả dự án của bạn..."></textarea>
          <button class="mt-2 rounded-xl bg-brand-600 hover:bg-brand-500 px-5 py-3 font-semibold shadow-glow">Gửi lời mời</button>
        </div>
      </form>
    </div>
  </section>

  <!-- FOOTER -->
  <footer class="relative z-10 pb-16">
    <div class="w-[min(1200px,92%)] mx-auto flex flex-col md:flex-row items-center justify-between gap-4">
      <div class="opacity-80 text-sm">© 2025 Nguyễn An — làm web vui vẻ.</div>
      <div class="flex gap-3">
        <a href="#" class="tag rounded-xl px-3 py-1 text-sm">Dribbble</a>
        <a href="#" class="tag rounded-xl px-3 py-1 text-sm">Twitter/X</a>
        <a href="#" class="tag rounded-xl px-3 py-1 text-sm">Instagram</a>
      </div>
    </div>
  </footer>

  <!-- SCRIPTS -->
  <script>
    // ===== Smooth scroll (Lenis) + GSAP sync =====
    const lenis = new Lenis({ smoothWheel: true, syncTouch: true, duration: 1.2 });
    function raf(time) { lenis.raf(time); requestAnimationFrame(raf); }
    requestAnimationFrame(raf);
    lenis.on('scroll', () => ScrollTrigger.update());

    // ===== Cursor =====
    const cursor = document.getElementById('cursor');
    window.addEventListener('mousemove', (e) => {
      cursor.style.left = e.clientX + 'px';
      cursor.style.top = e.clientY + 'px';
    });
    // grow on interactive
    document.querySelectorAll('a, button, .tilt, input, textarea').forEach(el=>{
      el.addEventListener('mouseenter', ()=> cursor.classList.add('-xl'));
      el.addEventListener('mouseleave', ()=> cursor.classList.remove('-xl'));
    });

    // ===== Split hero title + intro animation =====
    const split = new SplitType('#heroTitle', { types: 'words, chars' });
    gsap.from(split.chars, {
      yPercent: 120, opacity: 0, rotate: 8,
      stagger: 0.02, duration: 1.2, ease: 'power4.out', delay: .2
    });

    // ===== ScrollTrigger reveals =====
    gsap.utils.toArray('section').forEach((sec, i) => {
      if(i === 0) return;
      gsap.from(sec.querySelectorAll('.glass, h2, p, li, .proj'), {
        y: 40, opacity: 0, rotate: 0.5,
        stagger: 0.06, duration: 0.9, ease: 'power3.out',
        scrollTrigger: { trigger: sec, start: 'top 80%' }
      });
    });

    // ===== VanillaTilt for cards =====
    VanillaTilt.init(document.querySelectorAll(".tilt"), {
      glare: true, "max-glare": .25, scale: 1.02
    });

    // ===== THREE.JS: interactive scene (torus + particles) =====
    const canvas = document.getElementById('stage3d');
    const renderer = new THREE.WebGLRenderer({ canvas, antialias: true, alpha: true });
    const scene = new THREE.Scene();
    const camera = new THREE.PerspectiveCamera(55, window.innerWidth / window.innerHeight, 0.1, 100);
    camera.position.set(0, 0, 4);

    const resize = () => {
      const dpr = Math.min(window.devicePixelRatio, 2);
      renderer.setPixelRatio(dpr);
      renderer.setSize(window.innerWidth, window.innerHeight);
      camera.aspect = window.innerWidth / window.innerHeight;
      camera.updateProjectionMatrix();
    };
    resize(); window.addEventListener('resize', resize);

    // Lights
    const light = new THREE.PointLight(0x77aaff, .9); light.position.set(2,3,4); scene.add(light);
    const amb = new THREE.AmbientLight(0x3355aa, .35); scene.add(amb);

    // TorusKnot
    const knotGeo = new THREE.TorusKnotGeometry(0.9, 0.28, 220, 28);
    const knotMat = new THREE.MeshPhysicalMaterial({ roughness: 0.2, metalness: 0.6, color: 0x4B6DFF, transmission: 0, clearcoat: .5, sheen: 0.4, wireframe: true, opacity: .9, transparent: true });
    const knot = new THREE.Mesh(knotGeo, knotMat);
    knot.rotation.set(0.2, 0.3, 0);
    scene.add(knot);

    // Particles sphere
    const pCount = 1800;
    const pGeo = new THREE.BufferGeometry();
    const pos = new Float32Array(pCount * 3);
    for (let i=0;i<pCount;i++) {
      const r = 1.8 + (Math.random()*0.15 - 0.075);
      const t = Math.random()*Math.PI*2;
      const p = Math.acos(2*Math.random()-1);
      pos[i*3] = r * Math.sin(p) * Math.cos(t);
      pos[i*3+1] = r * Math.sin(p) * Math.sin(t);
      pos[i*3+2] = r * Math.cos(p);
    }
    pGeo.setAttribute('position', new THREE.BufferAttribute(pos, 3));
    const pMat = new THREE.PointsMaterial({ size: 0.01, color: 0x0ff7ff });
    const particles = new THREE.Points(pGeo, pMat);
    scene.add(particles);

    // Mouse parallax
    const mouse = {x:0, y:0};
    window.addEventListener('mousemove', (e)=>{
      mouse.x = (e.clientX / window.innerWidth) * 2 - 1;
      mouse.y = (e.clientY / window.innerHeight) * 2 - 1;
    });

    // Scroll camera z
    ScrollTrigger.create({
      trigger: document.body,
      start: "top top", end: "bottom bottom",
      onUpdate: (self)=> {
        const z = 4 + self.progress * 1.5; // zoom out nhẹ
        gsap.to(camera.position, { z, duration: .6, overwrite: true });
      }
    });

    // Tick
    let t = 0;
    const render = () => {
      t += 0.006;
      knot.rotation.x += 0.003;
      knot.rotation.y += 0.004;

      // subtle float via mouse
      knot.position.x = mouse.x * 0.2;
      knot.position.y = -mouse.y * 0.15;

      particles.rotation.y -= 0.0008;
      particles.rotation.x += Math.sin(t)*0.0005;

      renderer.render(scene, camera);
      requestAnimationFrame(render);
    };
    render();

    // ===== Fancy gradient shadow under sections =====
    document.querySelectorAll('section').forEach(sec=>{
      sec.style.position='relative';
      const glow = document.createElement('div');
      glow.style.position='absolute'; glow.style.inset='auto 0 -40px 0';
      glow.style.height='120px'; glow.style.zIndex='0';
      glow.style.background='radial-gradient(ellipse at center, rgba(79,110,255,.35), transparent 60%)';
      sec.appendChild(glow);
    });
  </script>
</body>
</html>
